{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { Link } from '../routes';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Nav from 'react-bootstrap/Nav';\nimport Container from 'react-bootstrap/Nav';\nimport Form from 'react-bootstrap/Form';\nimport FormControl from 'react-bootstrap/FormControl';\nimport Button from 'react-bootstrap/Button';\nimport { Card, Table } from 'react-bootstrap';\nimport factory from '../ethereum/Vote/factory';\nimport web3 from '../ethereum/web3';\nimport { Router } from '../routes';\n\nvar Index = /*#__PURE__*/function (_Component) {\n  _inherits(Index, _Component);\n\n  var _super = _createSuper(Index);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      loading: false,\n      loading2: false,\n      errorMessage: ''\n    }; // 為了讓 `this` 能在 callback 中被使用，這裡的綁定是必要的：\n\n    _this.login = _this.login.bind(_assertThisInitialized(_this));\n    _this.create = _this.create.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"login\",\n    value: function () {\n      var _login = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                Router.pushRoute(\"/Vote/index\");\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function login(_x) {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  }, {\n    key: \"create\",\n    value: function () {\n      var _create = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event) {\n        var accounts, addr, _addr;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                event.preventDefault();\n                this.setState({\n                  loading2: true\n                });\n                _context2.next = 5;\n                return web3.eth.getAccounts();\n\n              case 5:\n                accounts = _context2.sent;\n                _context2.next = 8;\n                return factory.methods.return_addr(accounts[0]).call();\n\n              case 8:\n                addr = _context2.sent;\n\n                if (!(addr != '0x0000000000000000000000000000000000000000')) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                Router.pushRoute(\"/home/\".concat(addr));\n                _context2.next = 20;\n                break;\n\n              case 13:\n                _context2.next = 15;\n                return factory.methods.create_mailbox().send({\n                  from: accounts[0]\n                });\n\n              case 15:\n                _context2.next = 17;\n                return factory.methods.return_addr(accounts[0]).call();\n\n              case 17:\n                _addr = _context2.sent;\n                if (_addr != null) Router.pushRoute(\"/home/\".concat(_addr));else alert(\"somthing wrong please try again!\");\n                this.setState({\n                  loading2: false\n                });\n\n              case 20:\n                _context2.next = 26;\n                break;\n\n              case 22:\n                _context2.prev = 22;\n                _context2.t0 = _context2[\"catch\"](0);\n                alert(_context2.t0);\n                this.setState({\n                  loading2: false\n                });\n\n              case 26:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 22]]);\n      }));\n\n      function create(_x2) {\n        return _create.apply(this, arguments);\n      }\n\n      return create;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(React.Fragment, null, __jsx(\"link\", {\n        rel: \"stylesheet\",\n        href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css\",\n        integrity: \"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk\",\n        crossOrigin: \"anonymous\"\n      }), __jsx(Container, null, __jsx(Navbar, {\n        bg: \"dark\",\n        variant: \"dark\",\n        style: {\n          width: \"100%\"\n        }\n      }, __jsx(Navbar.Brand, null, __jsx(Link, {\n        route: \"/vote/0x4CbCE152A771B089d1d82DccCA01253430194b10\"\n      }, __jsx(\"a\", {\n        style: {\n          color: \"white\",\n          width: \"100px\"\n        }\n      }, \"Vote\"))), __jsx(Nav, {\n        className: \"mr-auto\",\n        style: {\n          width: \"50%\",\n          color: \"white\"\n        }\n      }, \"Welcome to the vote website!\")), __jsx(\"div\", {\n        style: {\n          margin: \"auto\"\n        }\n      }, __jsx(\"h2\", {\n        style: {\n          margin: \"auto\",\n          marginTop: \"30%\"\n        }\n      }, \"Go to Vote\", __jsx(Button, {\n        variant: \"outline-info\",\n        style: {\n          width: '75%',\n          margin: \"auto\",\n          marginTop: \"3%\"\n        },\n        onClick: this.login,\n        loading: this.state.loading.toString()\n      }, \"Login to your mailbox\")), __jsx(\"h2\", {\n        style: {\n          margin: \"auto\",\n          marginTop: \"30%\"\n        }\n      }, \"Go to\", __jsx(Button, {\n        variant: \"outline-info\",\n        style: {\n          width: '75%',\n          margin: \"auto\",\n          marginTop: \"3%\"\n        },\n        onClick: this.create,\n        loading: this.state.loading2.toString()\n      }, \"Create new mailbox\")))));\n    }\n  }]);\n\n  return Index;\n}(Component);\n\nexport default Index;","map":{"version":3,"sources":["C:/Users/user/Desktop/college/Blockchain/DApp/nextjs-web/pages/index.js"],"names":["React","Component","Link","Navbar","Nav","Container","Form","FormControl","Button","Card","Table","factory","web3","Router","Index","props","state","loading","loading2","errorMessage","login","bind","create","event","pushRoute","preventDefault","setState","eth","getAccounts","accounts","methods","return_addr","call","addr","create_mailbox","send","from","alert","width","color","margin","marginTop","toString"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport{Link}from '../routes';\r\n\r\nimport Navbar from 'react-bootstrap/Navbar';\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport Container from 'react-bootstrap/Nav';\r\nimport Form from 'react-bootstrap/Form';\r\nimport FormControl from 'react-bootstrap/FormControl';\r\nimport Button from 'react-bootstrap/Button';\r\nimport {Card,Table} from 'react-bootstrap';\r\nimport factory from '../ethereum/Vote/factory';\r\nimport web3 from '../ethereum/web3'\r\nimport {Router}from '../routes';\r\nclass Index extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state ={\r\n        loading : false,\r\n        loading2: false,\r\n        errorMessage:''\r\n    };\r\n      // 為了讓 `this` 能在 callback 中被使用，這裡的綁定是必要的：\r\n      this.login = this.login.bind(this);\r\n      this.create= this.create.bind(this);\r\n    }\r\n    async login(event){\r\n      Router.pushRoute(`/Vote/index`);\r\n    }\r\n    async create(event){\r\n      try{\r\n        event.preventDefault();\r\n        this.setState({loading2:true});\r\n        var accounts = await web3.eth.getAccounts();\r\n        let addr =await factory.methods.return_addr(accounts[0]).call();\r\n        if(addr!='0x0000000000000000000000000000000000000000')Router.pushRoute(`/home/${addr}`);\r\n        else {\r\n          await factory.methods.create_mailbox().send({from:accounts[0]});\r\n          let addr =await factory.methods.return_addr(accounts[0]).call();\r\n          if(addr!=null)Router.pushRoute(`/home/${addr}`);\r\n          else alert(\"somthing wrong please try again!\");\r\n          this.setState({loading2:false});\r\n        }\r\n      }\r\n      catch(err){\r\n        alert(err);\r\n        this.setState({loading2:false});\r\n      }\r\n    }\r\n    render() {\r\n        return(\r\n          <>\r\n          <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css\" integrity=\"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk\" crossOrigin=\"anonymous\"/>\r\n          <Container>\r\n          <Navbar bg=\"dark\" variant=\"dark\"style={{width:\"100%\"}}>\r\n             <Navbar.Brand ><Link route=\"/vote/0x4CbCE152A771B089d1d82DccCA01253430194b10\" ><a style={{color: \"white\", width:\"100px\"}}>Vote</a></Link></Navbar.Brand>\r\n              <Nav className=\"mr-auto\" style={{width:\"50%\" ,color:\"white\"}}>\r\n                 Welcome to the vote website!\r\n              </Nav>\r\n         </Navbar>\r\n         \r\n         <div style={{margin:\"auto\"}}>\r\n          <h2 style = {{margin:\"auto\",marginTop : \"30%\"}}>\r\n            Go to Vote\r\n          <Button variant=\"outline-info\" style = {{width :'75%',margin:\"auto\",marginTop : \"3%\"}} onClick={this.login} loading={this.state.loading.toString()}>Login to your mailbox</Button>\r\n          </h2>\r\n          <h2 style = {{margin:\"auto\",marginTop : \"30%\"}}>\r\n            Go to \r\n          <Button variant=\"outline-info\" style = {{width :'75%',margin:\"auto\",marginTop : \"3%\"}} onClick={this.create} loading={this.state.loading2.toString()}>Create new mailbox</Button>\r\n          </h2>\r\n\r\n        </div>\r\n       </Container>\r\n         </>\r\n    )\r\n    }\r\n}\r\n\r\n\r\nexport default Index;"]},"metadata":{},"sourceType":"module"}