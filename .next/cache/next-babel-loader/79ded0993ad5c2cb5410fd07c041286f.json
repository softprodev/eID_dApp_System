{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { Link } from '../routes';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Nav from 'react-bootstrap/Nav';\nimport Container from 'react-bootstrap/Nav';\nimport Form from 'react-bootstrap/Form';\nimport FormControl from 'react-bootstrap/FormControl';\nimport Button from 'react-bootstrap/Button';\nimport { Card } from 'react-bootstrap';\nimport web3 from '../ethereum/web3';\nimport { Router } from '../routes';\nimport vote from '../ethereum/vote';\nimport registry from '../ethereum/registry';\n\nvar Votesss = /*#__PURE__*/function (_Component) {\n  _inherits(Votesss, _Component);\n\n  var _super = _createSuper(Votesss);\n\n  function Votesss(props) {\n    var _this$state;\n\n    var _this;\n\n    _classCallCheck(this, Votesss);\n\n    _this = _super.call(this, props);\n    _this.state = (_this$state = {\n      search: \"\",\n      loading: false,\n      loading2: false,\n      stage: ''\n    }, _defineProperty(_this$state, \"search\", ''), _defineProperty(_this$state, \"errorMessage\", ''), _defineProperty(_this$state, \"html_test\", null), _this$state); //console.log(props.query.address);//擷取這個網址的url那part的address(from routes??)  \n\n    _this.refresh_search = _this.refresh_search.bind(_assertThisInitialized(_this));\n    _this.show_stage = _this.show_stage.bind(_assertThisInitialized(_this));\n    _this.show_stage;\n    return _this;\n  }\n\n  _createClass(Votesss, [{\n    key: \"refresh_search\",\n    value: function refresh_search() {\n      Router.pushRoute(\"/vote/\".concat(this.state.search)); //console.log(this.props.address);\n    }\n  }, {\n    key: \"show_stage\",\n    value: function () {\n      var _show_stage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var Vote_event;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                Vote_event = vote(address);\n                _context.next = 3;\n                return Vote_event.methods.return_stage().call();\n\n              case 3:\n                this.state.stage = _context.sent;\n                if (this.state.stage == 0) this.state.html_test = __jsx(\"h3\", null, \"stage : Setup\");else if (this.state.stage == 1) this.state.html_test = __jsx(\"h3\", null, \"stage : Register\");else if (this.state.stage == 2) this.state.html_test = __jsx(\"h3\", null, \"stage : Vote\");else if (this.state.stage == 3) this.state.html_test = __jsx(\"h3\", null, \"stage : Tally\");else if (this.state.stage == 4) this.state.html_test = __jsx(\"h3\", null, \"stage : Finish\");\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function show_stage() {\n        return _show_stage.apply(this, arguments);\n      }\n\n      return show_stage;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(React.Fragment, null, __jsx(\"link\", {\n        rel: \"stylesheet\",\n        href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css\",\n        integrity: \"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk\",\n        crossOrigin: \"anonymous\"\n      }), __jsx(Container, null, __jsx(Navbar, {\n        bg: \"dark\",\n        variant: \"dark\",\n        style: {\n          width: \"100%\"\n        }\n      }, __jsx(Navbar.Brand, null, __jsx(Link, {\n        route: \"/vote/\" + this.props.address\n      }, __jsx(\"a\", {\n        style: {\n          color: \"white\",\n          width: \"100px\"\n        }\n      }, \"Vote\"))), __jsx(Nav, {\n        className: \"mr-auto\",\n        style: {\n          width: \"50%\"\n        }\n      }, __jsx(Link, {\n        route: \"/home/\" + this.props.address\n      }, __jsx(\"a\", {\n        style: {\n          color: \"white\",\n          width: \"100px\"\n        }\n      }, \"Home\")), __jsx(Link, {\n        route: \"/status/\" + this.props.address\n      }, __jsx(\"a\", {\n        style: {\n          color: \"white\",\n          width: \"100px\"\n        }\n      }, \"Status\")), __jsx(Link, {\n        route: \"/admin/\" + this.props.address\n      }, __jsx(\"a\", {\n        style: {\n          color: \"white\",\n          width: \"100px\"\n        }\n      }, \"CreateVote\")), __jsx(Link, {\n        route: \"/index\"\n      }, __jsx(\"a\", {\n        style: {\n          color: \"white\",\n          width: \"100px\"\n        }\n      }, \"Logout\")))), __jsx(\"div\", {\n        style: {\n          width: '100%'\n        }\n      }, __jsx(Form, {\n        inline: true,\n        style: {\n          width: '33%',\n          margin: 'auto',\n          marginTop: \"2%\"\n        }\n      }, __jsx(\"div\", {\n        style: {\n          color: \"black\"\n        }\n      }, \" inesrt your vote contract address here  ->   \"), __jsx(FormControl, {\n        type: \"text\",\n        placeholder: \"Search\",\n        className: \"mr-sm-2\",\n        value: this.state.search,\n        onChange: function onChange(event) {\n          return _this2.setState({\n            search: event.target.value\n          });\n        }\n      }), __jsx(Button, {\n        variant: \"outline-info\",\n        onClick: this.refresh_search\n      }, \"Search\")), __jsx(Card, {\n        style: {\n          width: '33%',\n          margin: 'auto',\n          marginTop: \"2%\"\n        }\n      }, __jsx(Card.Body, null, __jsx(Card.Title, null, \"Election\"), __jsx(Card.Subtitle, {\n        className: \"mb-2 text-muted\"\n      }, \"voter address : 0xjxijwijswiw\"), __jsx(Card.Text, null, \"View the latest 2020 presidential polls and head-to-head match-up between Joe Biden and Donald Trump. For more information, view cnn.com/election.\"), __jsx(Card.Text, null, this.props.stage_str), __jsx(Button, {\n        variant: \"outline-info\",\n        style: {\n          margin: \"2%\"\n        }\n      }, \"register\"), __jsx(Button, {\n        variant: \"outline-info\",\n        style: {\n          margin: \"2%\"\n        }\n      }, __jsx(Link, {\n        route: \"/status\"\n      }, __jsx(\"a\", null, \"Vote\"))), __jsx(Button, {\n        variant: \"outline-info\",\n        style: {\n          margin: \"2%\"\n        }\n      }, __jsx(Link, {\n        route: \"/status\"\n      }, __jsx(\"a\", null, \"detail candidate information\")))))), __jsx(\"div\", {\n        style: {\n          width: '100%'\n        }\n      }, __jsx(Form.Group, {\n        style: {\n          width: '33%',\n          margin: 'auto',\n          marginTop: \"2%\"\n        }\n      }, __jsx(Form.Control, {\n        as: \"select\",\n        size: \"lg\"\n      }, __jsx(\"option\", null, \"Korean Fish\"), __jsx(\"option\", null, \"Donald Trump\"), __jsx(\"option\", null, \"Xi DADA\")), __jsx(Form.Group, {\n        id: \"formGridCheckbox\"\n      }, __jsx(Form.Check, {\n        type: \"checkbox\",\n        label: \"Check me out\"\n      })), __jsx(Button, {\n        variant: \"primary\",\n        type: \"submit\"\n      }, \"Submit\")))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(props) {\n        var address, Vote_event, stage, option_length, stage_str;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                address = props.query.address;\n                _context2.next = 3;\n                return vote(address);\n\n              case 3:\n                Vote_event = _context2.sent;\n                _context2.next = 6;\n                return Vote_event.methods.return_stage().call();\n\n              case 6:\n                stage = _context2.sent;\n                _context2.next = 9;\n                return Vote_event.methods.return_options_length().call();\n\n              case 9:\n                option_length = _context2.sent;\n                stage_str = stage == 0 ? \"stage : Setup\" : stage == 1 ? \"stage : Register\" : stage == 2 ? \"stage : Vote\" : stage == 3 ? \"stage : Tally\" : stage == 4 ? \"stage : Finish\" : \"stage : Setup\";\n                return _context2.abrupt(\"return\", {\n                  address: address,\n                  Vote_event: Vote_event,\n                  stage: stage,\n                  option_length: option_length,\n                  stage_str: stage_str\n                });\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Votesss;\n}(Component);\n\nexport default Votesss;","map":{"version":3,"sources":["/Users/suvincent/vote-web/pages/vote.js"],"names":["React","Component","Link","Navbar","Nav","Container","Form","FormControl","Button","Card","web3","Router","vote","registry","Votesss","props","state","search","loading","loading2","stage","refresh_search","bind","show_stage","pushRoute","Vote_event","address","methods","return_stage","call","html_test","width","color","margin","marginTop","event","setState","target","value","stage_str","query","return_options_length","option_length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport{Link}from '../routes';\r\n\r\nimport Navbar from 'react-bootstrap/Navbar';\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport Container from 'react-bootstrap/Nav';\r\nimport Form from 'react-bootstrap/Form';\r\nimport FormControl from 'react-bootstrap/FormControl';\r\nimport Button from 'react-bootstrap/Button';\r\nimport {Card} from 'react-bootstrap';\r\n\r\nimport web3 from '../ethereum/web3'\r\nimport {Router}from '../routes';\r\nimport vote from '../ethereum/vote';\r\nimport registry from '../ethereum/registry';\r\n\r\nclass Votesss extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state ={\r\n          search:\"\",\r\n          loading : false,\r\n          loading2: false,\r\n          stage:'',\r\n          search:'',\r\n          errorMessage:'',\r\n          html_test:null\r\n        };\r\n      //console.log(props.query.address);//擷取這個網址的url那part的address(from routes??)  \r\n      this.refresh_search = this.refresh_search.bind(this);\r\n      this.show_stage = this.show_stage.bind(this);\r\n      this.show_stage;\r\n      }\r\n    static async getInitialProps(props){\r\n        const{address} = props.query;\r\n        const Vote_event =await vote(address);\r\n        const stage = await Vote_event.methods.return_stage().call();\r\n        const option_length = await Vote_event.methods.return_options_length().call();\r\n        const stage_str = (stage == 0)?\"stage : Setup\":\r\n                           (stage == 1)?\"stage : Register\":\r\n                           (stage == 2)?\"stage : Vote\":\r\n                           (stage == 3)?\"stage : Tally\":\r\n                           (stage == 4)?\"stage : Finish\":\"stage : Setup\";\r\n\r\n        return{address,Vote_event,stage,option_length,stage_str};\r\n    }\r\n    refresh_search(){\r\n        Router.pushRoute(`/vote/${this.state.search}`);\r\n        //console.log(this.props.address);\r\n    }\r\n    async show_stage(){\r\n        let Vote_event = vote(address);\r\n        this.state.stage = await Vote_event.methods.return_stage().call();\r\n        if(this.state.stage == 0)this.state.html_test=(<h3>stage : Setup</h3>);\r\n        else if(this.state.stage == 1)this.state.html_test=(<h3>stage : Register</h3>);\r\n        else if(this.state.stage == 2)this.state.html_test=(<h3>stage : Vote</h3>);\r\n        else if(this.state.stage == 3)this.state.html_test=(<h3>stage : Tally</h3>);\r\n        else if(this.state.stage == 4)this.state.html_test=(<h3>stage : Finish</h3>);\r\n    }\r\n    render() {\r\n        return(\r\n        <>\r\n         <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css\" integrity=\"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk\" crossOrigin=\"anonymous\"/>\r\n         <Container>\r\n         <Navbar bg=\"dark\" variant=\"dark\"style={{width:\"100%\"}}>\r\n            <Navbar.Brand ><Link route={\"/vote/\"+this.props.address }  ><a style={{color: \"white\", width:\"100px\"}}>Vote</a></Link></Navbar.Brand>\r\n             <Nav className=\"mr-auto\" style={{width:\"50%\"}}>\r\n                <Link route={\"/home/\"+this.props.address }  ><a style={{color: \"white\", width:\"100px\"}}>Home</a></Link>\r\n                <Link route={\"/status/\"+this.props.address } ><a style={{color: \"white\", width:\"100px\"}}>Status</a></Link>\r\n                <Link route={\"/admin/\"+this.props.address }  ><a style={{color: \"white\", width:\"100px\"}}>CreateVote</a></Link>\r\n                <Link route={\"/index\" }  ><a style={{color: \"white\", width:\"100px\"}}>Logout</a></Link>\r\n             </Nav>\r\n            \r\n        </Navbar>\r\n        <div style={{width: '100%'}}>\r\n        <Form inline style={{ width: '33%' , margin: 'auto' , marginTop : \"2%\"}}>\r\n            <div style={{color : \"black\"}} > inesrt your vote contract address here  -&gt;   </div>\r\n            <FormControl type=\"text\" placeholder=\"Search\" className=\"mr-sm-2\"\r\n                value={this.state.search} \r\n                onChange = {event => this.setState({search:event.target.value})} />\r\n            <Button variant=\"outline-info\" onClick={this.refresh_search}>Search</Button>\r\n            </Form>\r\n        <Card style={{ width: '33%' , margin: 'auto' , marginTop : \"2%\"}}>\r\n            <Card.Body>\r\n                <Card.Title>Election</Card.Title>\r\n                <Card.Subtitle className=\"mb-2 text-muted\">voter address : 0xjxijwijswiw</Card.Subtitle>\r\n                <Card.Text>\r\n                    View the latest 2020 presidential polls and head-to-head match-up between Joe Biden and Donald Trump. For more information, view cnn.com/election.\r\n                </Card.Text>\r\n                <Card.Text>{this.props.stage_str}</Card.Text>\r\n                <Button variant=\"outline-info\"style={{margin :\"2%\"}}>register</Button>\r\n                <Button variant=\"outline-info\"style={{margin :\"2%\"}}><Link route=\"/status\" ><a>Vote</a></Link></Button>\r\n                <Button variant=\"outline-info\" style={{margin :\"2%\"}}><Link route=\"/status\" ><a>detail candidate information</a></Link></Button>\r\n            </Card.Body>\r\n        </Card>\r\n        </div>\r\n        <div style={{ width: '100%'}}>\r\n            <Form.Group style={{width:'33%', margin: 'auto', marginTop : \"2%\"}}>\r\n            <Form.Control as=\"select\" size=\"lg\">\r\n                <option>Korean Fish</option>\r\n                <option>Donald Trump</option>\r\n                <option>Xi DADA</option>\r\n            </Form.Control>\r\n            \r\n            <Form.Group id=\"formGridCheckbox\">\r\n            <Form.Check type=\"checkbox\" label=\"Check me out\" />\r\n            </Form.Group>\r\n\r\n            <Button variant=\"primary\" type=\"submit\">\r\n                Submit\r\n            </Button>\r\n            </Form.Group>\r\n        </div>\r\n      </Container>\r\n        </>\r\n    )\r\n    }\r\n}\r\n\r\n\r\nexport default Votesss;"]},"metadata":{},"sourceType":"module"}