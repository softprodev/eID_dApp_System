{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n//做一個頁面是沒有mailbox時要新增一個mailbox\nimport React, { Component } from 'react';\nimport { Link } from '../routes';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Nav from 'react-bootstrap/Nav';\nimport Container from 'react-bootstrap/Nav';\nimport Form from 'react-bootstrap/Form';\nimport FormControl from 'react-bootstrap/FormControl';\nimport Button from 'react-bootstrap/Button';\nimport { Card, Table } from 'react-bootstrap';\nimport web3 from '../ethereum/web3';\nimport { Router } from '../routes';\nimport mailbox from '../ethereum/mailbox';\nimport vote from '../ethereum/vote';\nvar header = [\"#\", \"vote name\", \"vote address\", \"due date\", \"link\"];\n\nvar Home = /*#__PURE__*/function (_Component) {\n  _inherits(Home, _Component);\n\n  var _super = _createSuper(Home);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      // Mb_addr :props.query.address,\n      loading: false,\n      loading2: false,\n      errorMessage: ''\n    }; //console.log(props.query.address);//擷取這個網址的url那part的address(from routes??)  \n\n    _this.render_join = _this.render_join.bind(_assertThisInitialized(_this));\n    _this.render_self = _this.render_self.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"render\",\n    value: function render() {\n      return __jsx(React.Fragment, null, __jsx(\"link\", {\n        rel: \"stylesheet\",\n        href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css\",\n        integrity: \"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk\",\n        crossOrigin: \"anonymous\"\n      }), __jsx(Container, null, __jsx(Navbar, {\n        bg: \"dark\",\n        variant: \"dark\",\n        style: {\n          width: \"100%\"\n        }\n      }, __jsx(Navbar.Brand, null, __jsx(Link, {\n        route: \"/vote\"\n      }, __jsx(\"a\", {\n        style: {\n          color: \"white\",\n          width: \"100px\"\n        }\n      }, \"Vote\"))), __jsx(Nav, {\n        className: \"mr-auto\",\n        style: {\n          width: \"50%\"\n        }\n      }, __jsx(Link, {\n        route: \"/status\"\n      }, __jsx(\"a\", {\n        style: {\n          color: \"white\",\n          width: \"100px\"\n        }\n      }, \"Status\")), __jsx(Link, {\n        route: \"/admin\"\n      }, __jsx(\"a\", {\n        style: {\n          color: \"white\",\n          width: \"100px\"\n        }\n      }, \"CreateVote\"))), __jsx(Form, {\n        inline: true\n      }, __jsx(\"div\", {\n        style: {\n          color: \"white\"\n        }\n      }, \" inesrt your vote contract address here  ->   \"), __jsx(FormControl, {\n        type: \"text\",\n        placeholder: \"Search\",\n        className: \"mr-sm-2\"\n      }), __jsx(Button, {\n        variant: \"outline-info\"\n      }, \"Search\"))), __jsx(\"div\", {\n        style: {\n          width: '100%'\n        }\n      }, __jsx(\"h2\", {\n        style: {\n          width: '75%',\n          margin: \"auto\",\n          marginTop: \"3%\"\n        }\n      }, \"Vote List (the vote you are invited)\"), __jsx(Table, {\n        striped: true,\n        bordered: true,\n        hover: true,\n        size: \"sm\",\n        style: {\n          width: '75%',\n          margin: \"auto\",\n          marginTop: \"3%\"\n        }\n      }, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"#\"), __jsx(\"th\", null, \"vote name\"), __jsx(\"th\", null, \"vote address\"), __jsx(\"th\", null, \"due date\"), __jsx(\"th\", null, \"link\"))), __jsx(\"tbody\", null, __jsx(\"tr\", null, __jsx(\"td\", null, \"1\"), __jsx(\"td\", null, \"should everyone wear mask on campus\"), __jsx(\"td\", null, \"0x1234556778999888\"), __jsx(\"td\", null, \"7/14\"), __jsx(\"td\", null, __jsx(Link, {\n        route: \"/vote\"\n      }, \"link\"))), __jsx(\"tr\", null, __jsx(\"td\", null, \"2\"), __jsx(\"td\", null, \"should everyone wear mask on campus\"), __jsx(\"td\", null, \"0x1234556778999888\"), __jsx(\"td\", null, \"7/14\"), __jsx(\"td\", null, __jsx(Link, {\n        route: \"/vote\"\n      }, \"link\"))), __jsx(\"tr\", null, __jsx(\"td\", null, \"3\"), __jsx(\"td\", null, \"should everyone wear mask on campus\"), __jsx(\"td\", null, \"0x1234556778999888\"), __jsx(\"td\", null, \"7/14\"), __jsx(\"td\", null, __jsx(Link, {\n        route: \"/vote\"\n      }, \"link\")))))), __jsx(\"div\", {\n        style: {\n          width: '100%'\n        }\n      }, __jsx(\"h2\", {\n        style: {\n          width: '75%',\n          margin: \"auto\",\n          marginTop: \"3%\"\n        }\n      }, \"Vote Admin List (the vote you create)\"), __jsx(Table, {\n        striped: true,\n        bordered: true,\n        hover: true,\n        size: \"sm\",\n        style: {\n          width: '75%',\n          margin: \"auto\",\n          marginTop: \"3%\"\n        }\n      }, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"#\"), __jsx(\"th\", null, \"vote name\"), __jsx(\"th\", null, \"vote address\"), __jsx(\"th\", null, \"next step due date\"), __jsx(\"th\", null, \"nextstep\"))), __jsx(\"tbody\", null, __jsx(\"tr\", null, __jsx(\"td\", null, \"1\"), __jsx(\"td\", null, \"should everyone wear mask on campus\"), __jsx(\"td\", null, \"0x1234556778999888\"), __jsx(\"td\", null, \"7/14\"), __jsx(\"td\", null, __jsx(Link, {\n        route: \"/vote\"\n      }, \"update setting\"))), __jsx(\"tr\", null, __jsx(\"td\", null, \"2\"), __jsx(\"td\", null, \"should everyone wear mask on campus\"), __jsx(\"td\", null, \"0x1234556778999888\"), __jsx(\"td\", null, \"7/14\"), __jsx(\"td\", null, __jsx(Link, {\n        route: \"/vote\"\n      }, \"distribute vote contract\"))), __jsx(\"tr\", null, __jsx(\"td\", null, \"3\"), __jsx(\"td\", null, \"should everyone wear mask on campus\"), __jsx(\"td\", null, \"0x1234556778999888\"), __jsx(\"td\", null, \"7/14\"), __jsx(\"td\", null, __jsx(Link, {\n        route: \"/vote\"\n      }, \"tally\"))))))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(props) {\n        var address, accounts, Mailbox, join, join_detail, index, arr, v_addr, v, self, self_detail, _index, _arr, _v_addr, _v;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                address = props.query.address;\n                _context.next = 3;\n                return web3.eth.getAccounts();\n\n              case 3:\n                accounts = _context.sent;\n                Mailbox = mailbox(accounts[0]);\n                _context.next = 7;\n                return Mailbox.methods.return_join_list().call();\n\n              case 7:\n                join = _context.sent;\n                index = 0;\n\n              case 9:\n                if (!(index < join.length)) {\n                  _context.next = 26;\n                  break;\n                }\n\n                arr = void 0;\n                v_addr = join[index];\n                v = vote(v_addr);\n                arr[0] = index + 1;\n                _context.next = 16;\n                return v.methods.return_question().call();\n\n              case 16:\n                arr[1] = _context.sent;\n                arr[2] = v_addr;\n                _context.next = 20;\n                return v.methods.return_time().call();\n\n              case 20:\n                arr[3] = _context.sent;\n                arr[4] = v_addr;\n                join_detail.push(arr);\n\n              case 23:\n                index++;\n                _context.next = 9;\n                break;\n\n              case 26:\n                _context.next = 28;\n                return Mailbox.methods.return_self_list().call();\n\n              case 28:\n                self = _context.sent;\n                _index = 0;\n\n              case 30:\n                if (!(_index < join.length)) {\n                  _context.next = 49;\n                  break;\n                }\n\n                _arr = void 0;\n                _v_addr = self[_index];\n                _v = vote(_v_addr);\n                _arr[0] = _index + 1;\n                _context.next = 37;\n                return _v.methods.return_question().call();\n\n              case 37:\n                _arr[1] = _context.sent;\n                _arr[2] = _v_addr;\n                _context.next = 41;\n                return _v.methods.return_time().call();\n\n              case 41:\n                _arr[3] = _context.sent;\n                _context.next = 44;\n                return _v.methods.return_stage().call();\n\n              case 44:\n                _arr[4] = _context.sent;\n                //return stage 之後要set stage\n                self_detail.push(_arr);\n\n              case 46:\n                _index++;\n                _context.next = 30;\n                break;\n\n              case 49:\n                return _context.abrupt(\"return\", {\n                  address: address,\n                  join_detail: join_detail,\n                  self_detail: self_detail\n                });\n\n              case 50:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":{"version":3,"sources":["/Users/suvincent/vote-web/pages/home.js"],"names":["React","Component","Link","Navbar","Nav","Container","Form","FormControl","Button","Card","Table","web3","Router","mailbox","vote","header","Home","props","state","loading","loading2","errorMessage","render_join","bind","render_self","width","color","margin","marginTop","address","query","eth","getAccounts","accounts","Mailbox","methods","return_join_list","call","join","index","length","arr","v_addr","v","return_question","return_time","join_detail","push","return_self_list","self","return_stage","self_detail"],"mappings":"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","sourcesContent":["//做一個頁面是沒有mailbox時要新增一個mailbox\r\nimport React, { Component } from 'react';\r\nimport{Link}from '../routes';\r\n\r\nimport Navbar from 'react-bootstrap/Navbar';\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport Container from 'react-bootstrap/Nav';\r\nimport Form from 'react-bootstrap/Form';\r\nimport FormControl from 'react-bootstrap/FormControl';\r\nimport Button from 'react-bootstrap/Button';\r\nimport {Card,Table} from 'react-bootstrap';\r\nimport web3 from '../ethereum/web3'\r\nimport {Router}from '../routes';\r\nimport mailbox from '../ethereum/mailbox';\r\nimport vote from '../ethereum/vote';\r\nconst header = [\"#\", \"vote name\", \"vote address\", \"due date\", \"link\"];\r\n\r\n\r\n\r\nclass Home extends Component {\r\n        constructor(props) {\r\n          super(props);\r\n          this.state ={\r\n           // Mb_addr :props.query.address,\r\n            loading : false,\r\n            loading2: false,\r\n            errorMessage:''\r\n          };\r\n        //console.log(props.query.address);//擷取這個網址的url那part的address(from routes??)  \r\n        this.render_join = this.render_join.bind(this);\r\n        this.render_self= this.render_self.bind(this);\r\n        }\r\n        static async getInitialProps(props){\r\n          const{address} = props.query;\r\n          const accounts = await web3.eth.getAccounts();\r\n          const Mailbox = mailbox(accounts[0]);\r\n          let join = await Mailbox.methods.return_join_list().call();\r\n          var join_detail;\r\n          for (let index = 0; index < join.length; index++) {\r\n            let arr;\r\n            let v_addr = join[index];\r\n            let v = vote(v_addr);\r\n            arr[0] = index+1;\r\n            arr[1] = await v.methods.return_question().call();\r\n            arr[2] = v_addr;\r\n            arr[3] = await v.methods.return_time().call();\r\n            arr[4] = v_addr\r\n            join_detail.push(arr);\r\n          }\r\n          let self = await Mailbox.methods.return_self_list().call();\r\n          var self_detail;\r\n          for (let index = 0; index < join.length; index++) {\r\n            let arr;\r\n            let v_addr = self[index];\r\n            let v = vote(v_addr);\r\n            arr[0] = index+1;\r\n            arr[1] = await v.methods.return_question().call();\r\n            arr[2] = v_addr;\r\n            arr[3] = await v.methods.return_time().call();\r\n            arr[4] = await v.methods.return_stage().call();//return stage 之後要set stage\r\n            self_detail.push(arr);\r\n          }\r\n          return{address,join_detail,self_detail};\r\n      }\r\n    \r\n    \r\n\r\n    render() {\r\n      \r\n        return(\r\n          <>\r\n          <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css\" integrity=\"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk\" crossOrigin=\"anonymous\"/>\r\n          <Container>\r\n          <Navbar bg=\"dark\" variant=\"dark\"style={{width:\"100%\"}}>\r\n             <Navbar.Brand ><Link route=\"/vote\" ><a style={{color: \"white\", width:\"100px\"}}>Vote</a></Link></Navbar.Brand>\r\n              <Nav className=\"mr-auto\" style={{width:\"50%\"}}>\r\n                 <Link route=\"/status\" ><a style={{color: \"white\", width:\"100px\"}}>Status</a></Link>\r\n                 <Link route=\"/admin\" ><a style={{color: \"white\", width:\"100px\"}}>CreateVote</a></Link>\r\n              </Nav>\r\n             <Form inline>\r\n             <div style={{color : \"white\"}} > inesrt your vote contract address here  -&gt;   </div>\r\n             <FormControl type=\"text\" placeholder=\"Search\" className=\"mr-sm-2\" />\r\n             <Button variant=\"outline-info\">Search</Button>\r\n             </Form>\r\n         </Navbar>\r\n         \r\n         <div style={{width: '100%'}}>\r\n         <h2 style = {{width :'75%',margin:\"auto\",marginTop : \"3%\"}}>Vote List (the vote you are invited)</h2>\r\n         <Table striped bordered hover size=\"sm\" style = {{width :'75%',margin:\"auto\",marginTop : \"3%\"}}>\r\n          <thead>\r\n            <tr>\r\n              <th>#</th>\r\n              <th>vote name</th>\r\n              <th>vote address</th>\r\n              <th>due date</th>\r\n              <th>link</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody >\r\n          <tr>\r\n        <td>1</td>\r\n        <td>should everyone wear mask on campus</td>\r\n        <td>0x1234556778999888</td>\r\n        <td>7/14</td>\r\n        <td><Link route=\"/vote\" >link</Link></td>\r\n      </tr>\r\n      <tr>\r\n        <td>2</td>\r\n        <td>should everyone wear mask on campus</td>\r\n        <td>0x1234556778999888</td>\r\n        <td>7/14</td>\r\n        <td><Link route=\"/vote\" >link</Link></td>\r\n      </tr>\r\n      <tr>\r\n        <td>3</td>\r\n        <td>should everyone wear mask on campus</td>\r\n        <td>0x1234556778999888</td>\r\n        <td>7/14</td>\r\n        <td><Link route=\"/vote\" >link</Link></td>\r\n      </tr>\r\n          </tbody>\r\n        </Table>\r\n        \r\n        </div>\r\n        <div style={{width: '100%'}}>\r\n        <h2 style = {{width :'75%',margin:\"auto\",marginTop : \"3%\"}}>Vote Admin List (the vote you create)</h2>\r\n         <Table striped bordered hover size=\"sm\" style = {{width :'75%',margin:\"auto\",marginTop : \"3%\"}}>\r\n          <thead>\r\n            <tr>\r\n              <th>#</th>\r\n              <th>vote name</th>\r\n              <th>vote address</th>\r\n              <th>next step due date</th>\r\n              <th>nextstep</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td>1</td>\r\n              <td>should everyone wear mask on campus</td>\r\n              <td>0x1234556778999888</td>\r\n              <td>7/14</td>\r\n              <td><Link route=\"/vote\" >update setting</Link></td>\r\n            </tr>\r\n            <tr>\r\n              <td>2</td>\r\n              <td>should everyone wear mask on campus</td>\r\n              <td>0x1234556778999888</td>\r\n              <td>7/14</td>\r\n              <td><Link route=\"/vote\" >distribute vote contract</Link></td>\r\n            </tr>\r\n            <tr>\r\n              <td>3</td>\r\n              <td>should everyone wear mask on campus</td>\r\n              <td>0x1234556778999888</td>\r\n              <td>7/14</td>\r\n              <td><Link route=\"/vote\" >tally</Link></td>\r\n            </tr>\r\n          </tbody>\r\n        </Table>\r\n        </div>\r\n       </Container>\r\n         </>\r\n    )\r\n    }\r\n}\r\n\r\n\r\nexport default Home;"]},"metadata":{},"sourceType":"module"}