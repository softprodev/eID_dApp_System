{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { Button, Form } from 'semantic-ui-react';\nimport Layout from '../../components/Layout';\nimport { Link } from '../../routes';\n\nvar path = require('path'); //const fs = require('fs-extra');\n\n\nvar CertificateIndex = /*#__PURE__*/function (_Component) {\n  _inherits(CertificateIndex, _Component);\n\n  var _super = _createSuper(CertificateIndex);\n\n  function CertificateIndex() {\n    var _this;\n\n    _classCallCheck(this, CertificateIndex);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      selectedFile: null,\n      hashValue: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFileChange\", function (event) {\n      _this.setState({\n        selectedFile: event.target.files[0]\n      });\n\n      var curFile = event.target.files[0];\n      var reader = new FileReader();\n      reader.readAsText(curFile);\n\n      reader.onload = function (e) {\n        //console.log('file:', e.target.result);\n        var jsonData = JSON.parse(this.result);\n        console.log(jsonData); // hash json\n\n        var reader = new FileReader();\n        reader.readAsArrayBuffer(curFile);\n\n        reader.onload = function () {\n          var wordArray = CryptoJS.lib.WordArray.create(reader.result);\n          var hash = CryptoJS.SHA256(wordArray).toString();\n          this.setState({\n            hash: hash\n          });\n          console.log(hash);\n        };\n      }; // build\n      // const buildPath = path.resolve(__dirname, 'build');\n      // fs.removeSync(buildPath);\n      // const source = fs.readFileSync(jsonData, 'utf8');\n      // const output = solc.compile(source, 1).contracts;\n      // fs.ensureDirSync(buildPath);\n      // //console.log(output);\n      // for (let contract in output) {\n      //   //console.log(contract);\n      //   fs.outputJsonSync(\n      //     path.resolve(buildPath, contract.replace(':', '') + '.json'),\n      //     output[contract]\n      //   );\n      // }\n\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fileData\", function () {\n      if (_this.state.selectedFile) {\n        return __jsx(\"div\", null, __jsx(\"h2\", null, \"File Details:\"), __jsx(\"p\", null, \"File Name: \", _this.state.selectedFile.name), __jsx(\"p\", null, \"File Type: \", _this.state.selectedFile.type));\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(CertificateIndex, [{\n    key: \"render\",\n    value: function render() {\n      return __jsx(Layout, null, __jsx(\"script\", {\n        src: \"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js\"\n      }), __jsx(\"h1\", null, \"Verify Certificates\"), __jsx(Form, null, __jsx(\"h3\", null, \"Choose a JSON file\"), __jsx(\"input\", {\n        type: \"file\",\n        onChange: this.onFileChange,\n        accept: \"application/json\",\n        style: {\n          marginBottom: 20\n        }\n      }), this.fileData(), __jsx(Link, {\n        route: \"/Academic/certificates/\".concat(this.hash, \"/success\")\n      }, __jsx(\"a\", null, __jsx(Button, {\n        content: \"Verify\",\n        icon: \"check circle outline\",\n        primary: true,\n        style: {\n          marginTop: 20\n        }\n      })))));\n    }\n  }]);\n\n  return CertificateIndex;\n}(Component);\n\nexport default CertificateIndex;","map":{"version":3,"sources":["C:/Users/user/Desktop/college/Blockchain/DApp/nextjs-web/pages/Academic/index.js"],"names":["React","Component","Button","Form","Layout","Link","path","require","CertificateIndex","selectedFile","hashValue","event","setState","target","files","curFile","reader","FileReader","readAsText","onload","e","jsonData","JSON","parse","result","console","log","readAsArrayBuffer","wordArray","CryptoJS","lib","WordArray","create","hash","SHA256","toString","state","name","type","onFileChange","marginBottom","fileData","marginTop"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,EAAiBC,IAAjB,QAA6B,mBAA7B;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,SAASC,IAAT,QAAqB,cAArB;;AACA,IAAMC,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB,C,CACA;;;IAEMC,gB;;;;;;;;;;;;;;;;4DACI;AACNC,MAAAA,YAAY,EAAE,IADR;AAENC,MAAAA,SAAS,EAAE;AAFL,K;;mEAKO,UAAAC,KAAK,EAAI;AACtB,YAAKC,QAAL,CAAc;AAAEH,QAAAA,YAAY,EAAEE,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB;AAAhB,OAAd;;AAEA,UAAMC,OAAO,GAAGJ,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAhB;AACA,UAAME,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,MAAAA,MAAM,CAACE,UAAP,CAAkBH,OAAlB;;AACAC,MAAAA,MAAM,CAACG,MAAP,GAAgB,UAAUC,CAAV,EAAa;AAC3B;AACA,YAAIC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CAAW,KAAKC,MAAhB,CAAf;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ,EAH2B,CAK3B;;AACA,YAAIL,MAAM,GAAG,IAAIC,UAAJ,EAAb;AACAD,QAAAA,MAAM,CAACW,iBAAP,CAAyBZ,OAAzB;;AACAC,QAAAA,MAAM,CAACG,MAAP,GAAgB,YAAY;AAC1B,cAAIS,SAAS,GAAGC,QAAQ,CAACC,GAAT,CAAaC,SAAb,CAAuBC,MAAvB,CAA8BhB,MAAM,CAACQ,MAArC,CAAhB;AACA,cAAIS,IAAI,GAAGJ,QAAQ,CAACK,MAAT,CAAgBN,SAAhB,EAA2BO,QAA3B,EAAX;AACA,eAAKvB,QAAL,CAAc;AAAEqB,YAAAA,IAAI,EAAEA;AAAR,WAAd;AACAR,UAAAA,OAAO,CAACC,GAAR,CAAYO,IAAZ;AACD,SALD;AAOD,OAfD,CANsB,CAuBtB;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACD,K;;+DAEU,YAAM;AACf,UAAI,MAAKG,KAAL,CAAW3B,YAAf,EAA6B;AAC3B,eACE,mBACE,kCADF,EAEE,gCAAe,MAAK2B,KAAL,CAAW3B,YAAX,CAAwB4B,IAAvC,CAFF,EAGE,gCAAe,MAAKD,KAAL,CAAW3B,YAAX,CAAwB6B,IAAvC,CAHF,CADF;AAOD;AACF,K;;;;;;;6BAEQ;AACP,aACE,MAAC,MAAD,QACE;AAAQ,QAAA,GAAG,EAAC;AAAZ,QADF,EAEE,wCAFF,EAGE,MAAC,IAAD,QACE,uCADF,EAEE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,QAAQ,EAAE,KAAKC,YAFjB;AAGE,QAAA,MAAM,EAAC,kBAHT;AAIE,QAAA,KAAK,EAAE;AAAEC,UAAAA,YAAY,EAAE;AAAhB;AAJT,QAFF,EAQG,KAAKC,QAAL,EARH,EASE,MAAC,IAAD;AAAM,QAAA,KAAK,mCAA4B,KAAKR,IAAjC;AAAX,SACE,iBACE,MAAC,MAAD;AACE,QAAA,OAAO,EAAC,QADV;AAEE,QAAA,IAAI,EAAC,sBAFP;AAGE,QAAA,OAAO,EAAE,IAHX;AAIE,QAAA,KAAK,EAAE;AAAES,UAAAA,SAAS,EAAE;AAAb;AAJT,QADF,CADF,CATF,CAHF,CADF;AA2BD;;;;EAxF4BzC,S;;AA2F/B,eAAeO,gBAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport { Button, Form } from 'semantic-ui-react';\r\nimport Layout from '../../components/Layout';\r\nimport { Link } from '../../routes';\r\nconst path = require('path');\r\n//const fs = require('fs-extra');\r\n\r\nclass CertificateIndex extends Component {\r\n  state = { \r\n    selectedFile: null,\r\n    hashValue: null\r\n  };\r\n\r\n  onFileChange = event => {\r\n    this.setState({ selectedFile: event.target.files[0] });\r\n\r\n    const curFile = event.target.files[0];\r\n    const reader = new FileReader();\r\n    reader.readAsText(curFile);\r\n    reader.onload = function (e) {\r\n      //console.log('file:', e.target.result);\r\n      let jsonData = JSON.parse(this.result);\r\n      console.log(jsonData);\r\n\r\n      // hash json\r\n      let reader = new FileReader();\r\n      reader.readAsArrayBuffer(curFile);\r\n      reader.onload = function () {\r\n        var wordArray = CryptoJS.lib.WordArray.create(reader.result);\r\n        var hash = CryptoJS.SHA256(wordArray).toString();\r\n        this.setState({ hash: hash});\r\n        console.log(hash);\r\n      };\r\n      \r\n    };\r\n\r\n    // build\r\n    // const buildPath = path.resolve(__dirname, 'build');\r\n    // fs.removeSync(buildPath);\r\n\r\n    // const source = fs.readFileSync(jsonData, 'utf8');\r\n    // const output = solc.compile(source, 1).contracts;\r\n\r\n    // fs.ensureDirSync(buildPath);\r\n\r\n    // //console.log(output);\r\n    // for (let contract in output) {\r\n    //   //console.log(contract);\r\n    //   fs.outputJsonSync(\r\n    //     path.resolve(buildPath, contract.replace(':', '') + '.json'),\r\n    //     output[contract]\r\n    //   );\r\n    // }\r\n  };\r\n\r\n  fileData = () => {\r\n    if (this.state.selectedFile) {\r\n      return (\r\n        <div>\r\n          <h2>File Details:</h2>\r\n          <p>File Name: {this.state.selectedFile.name}</p>\r\n          <p>File Type: {this.state.selectedFile.type}</p>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Layout>\r\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.js\"></script>\r\n        <h1>Verify Certificates</h1>\r\n        <Form>\r\n          <h3>Choose a JSON file</h3>\r\n          <input\r\n            type=\"file\"\r\n            onChange={this.onFileChange}\r\n            accept=\"application/json\"\r\n            style={{ marginBottom: 20 }}\r\n          />\r\n          {this.fileData()}\r\n          <Link route={`/Academic/certificates/${this.hash}/success`}>\r\n            <a>\r\n              <Button\r\n                content='Verify'\r\n                icon='check circle outline'\r\n                primary={true}\r\n                style={{ marginTop: 20 }}\r\n              />\r\n            </a>\r\n          </Link>\r\n\r\n        </Form>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CertificateIndex;"]},"metadata":{},"sourceType":"module"}