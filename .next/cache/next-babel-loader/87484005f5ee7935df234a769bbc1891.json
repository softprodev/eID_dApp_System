{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { Link } from '../../routes';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Nav from 'react-bootstrap/Nav';\nimport Container from 'react-bootstrap/Nav';\nimport Form from 'react-bootstrap/Form';\nimport FormControl from 'react-bootstrap/FormControl';\nimport Button from 'react-bootstrap/Button';\nimport { Card, Table } from 'react-bootstrap';\nimport ReactShadowScroll from 'react-shadow-scroll';\nimport web3 from '../../ethereum/web3';\nimport { Router } from '../../routes';\nimport vote from '../../ethereum/Vote/vote';\n\nvar Status = /*#__PURE__*/function (_Component) {\n  _inherits(Status, _Component);\n\n  var _super = _createSuper(Status);\n\n  function Status(props) {\n    var _this;\n\n    _classCallCheck(this, Status);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      search: \"\",\n      register: \"\",\n      register_answer: \"\",\n      loading: false,\n      loading2: false,\n      errorMessage: ''\n    };\n    _this.refresh_search = _this.refresh_search.bind(_assertThisInitialized(_this));\n    _this.search_register = _this.search_register.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Status, [{\n    key: \"refresh_search\",\n    value: function refresh_search() {\n      if (this.state.search != \"\") Router.pushRoute(\"/Vote/status/\".concat(this.state.search)); //console.log(this.props.address);\n    }\n  }, {\n    key: \"search_register\",\n    value: function search_register() {\n      if (this.state.register == \"\") {\n        this.setState({\n          register_answer: \"\"\n        });\n        return;\n      }\n\n      for (var index = 0; index < this.props.voter_list.length; index++) {\n        if (this.state.register == this.props.voter_list[index]) {\n          this.setState({\n            register_answer: \"Already Registered !\"\n          });\n          this.setState({\n            register: \"\"\n          });\n          return;\n        }\n      } //console.log(this.state.register_answer);\n\n\n      this.setState({\n        register_answer: \"Voter not found !\"\n      });\n      this.setState({\n        register: \"\"\n      }); //this.setState({register_answer:\"\"});\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(React.Fragment, null, __jsx(\"link\", {\n        rel: \"stylesheet\",\n        href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css\",\n        integrity: \"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk\",\n        crossorigin: \"anonymous\"\n      }), __jsx(Container, null, __jsx(Navbar, {\n        bg: \"dark\",\n        variant: \"dark\",\n        style: {\n          width: \"100%\"\n        }\n      }, __jsx(Navbar.Brand, null, \"Vote\"), __jsx(Nav, {\n        className: \"mr-auto\"\n      }, __jsx(Link, {\n        route: \"/Vote/home/\" + this.props.mb_addr\n      }, __jsx(\"a\", {\n        style: {\n          color: \"white\",\n          width: \"100px\"\n        }\n      }, \"Home\")), __jsx(Link, {\n        route: \"/Vote/status/\" + this.props.mb_addr + \"/\" + this.props.address\n      }, __jsx(\"a\", {\n        style: {\n          color: \"white\",\n          width: \"100px\"\n        }\n      }, \"Vote\")), __jsx(Link, {\n        route: \"/Vote/index\"\n      }, __jsx(\"a\", {\n        style: {\n          color: \"white\",\n          width: \"100px\"\n        }\n      }, \"Logout\"))), __jsx(Form, {\n        inline: true,\n        style: {\n          margin: \"auto\"\n        }\n      }, __jsx(\"div\", {\n        style: {\n          color: \"white\"\n        }\n      }, \" insert your vote contract address here  ->   \"), __jsx(FormControl, {\n        type: \"text\",\n        placeholder: \"Search\",\n        className: \"mr-sm-2\",\n        value: this.state.search,\n        onChange: function onChange(event) {\n          return _this2.setState({\n            search: event.target.value\n          });\n        }\n      }), __jsx(Button, {\n        variant: \"outline-info\",\n        onClick: this.refresh_search\n      }, \"Search\"))), __jsx(Card, {\n        style: {\n          width: '46%',\n          margin: '1.5%',\n          height: '30%'\n        }\n      }, __jsx(Card.Body, null, __jsx(Card.Title, null, \"Eligible Voters\"), __jsx(Card.Subtitle, {\n        className: \"mb-2 text-muted\"\n      }, \"voter quantity : \", this.props.voter_list.length), __jsx(Form, {\n        inline: true,\n        style: {\n          margin: \"auto\"\n        }\n      }, __jsx(FormControl, {\n        type: \"text\",\n        placeholder: \"Search\",\n        className: \"mr-sm-2\",\n        value: this.state.register,\n        onChange: function onChange(event) {\n          return _this2.setState({\n            register: event.target.value\n          });\n        }\n      }), __jsx(Button, {\n        variant: \"outline-info\",\n        onClick: this.search_register\n      }, \"Search\"), __jsx(Card.Subtitle, {\n        className: \"mb-2 text-muted\",\n        style: {\n          marginTop: \"1%\",\n          margin: \"2%\"\n        }\n      }, this.state.register_answer)), __jsx(Table, {\n        responsive: true,\n        style: {\n          'height': '200px',\n          \"width\": \"100%\",\n          'overflowY': 'scroll',\n          'display': 'block'\n        }\n      }, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"#\"), __jsx(\"th\", null, \"Voting Address\"), __jsx(\"th\", null, \"Register or not\"))), __jsx(\"tbody\", null, __jsx(Voter_listQQ, {\n        list: this.props.voter_list\n      }))))), __jsx(Card, {\n        style: {\n          width: '46%',\n          margin: '1.5%'\n        }\n      }, __jsx(Card.Body, null, __jsx(Card.Title, null, \"Voting Illustration\"), __jsx(Card.Subtitle, {\n        className: \"mb-2 text-muted\"\n      }, \"Vote address : \", this.props.address), __jsx(Card.Subtitle, {\n        className: \"mb-2 text-muted\"\n      }, this.props.stage_str), __jsx(Card.Text, null, \"View the latest 2020 presidential polls and head-to-head match-up between Joe Biden and Donald Trump. For more information, view cnn.com/election.\"), __jsx(Table, {\n        responsive: true,\n        style: {\n          'height': '200px',\n          \"width\": \"100%\",\n          'overflowY': 'scroll',\n          'display': 'block'\n        }\n      }, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"#\"), __jsx(\"th\", null, \"Start time\"), __jsx(\"th\", null, \"End time\"))), __jsx(\"tbody\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"Register time\"), __jsx(\"th\", null, this.props.time !== undefined ? this.props.time[0] : \"\"), __jsx(\"th\", null, this.props.time !== undefined ? this.props.time[1] : \"\")), __jsx(\"tr\", null, __jsx(\"th\", null, \"Vote time\"), __jsx(\"th\", null, this.props.time !== undefined ? this.props.time[2] : \"\"), __jsx(\"th\", null, this.props.time !== undefined ? this.props.time[3] : \"\")))))), __jsx(Card, {\n        style: {\n          width: '46%',\n          margin: '1.5%'\n        }\n      }, __jsx(Card.Body, null, __jsx(Card.Title, null, \"Voting result\"), __jsx(Card.Subtitle, {\n        className: \"mb-2 text-muted\"\n      }, \"The Vote result is shown below\"), __jsx(Vote_result, {\n        results: this.props.options,\n        stage: this.props.stage,\n        winner: this.props.winner,\n        stage_str: this.props.stage_str,\n        address: this.props.address,\n        mb_addr: this.props.mb_addr\n      }))), __jsx(Card, {\n        style: {\n          width: '46%',\n          margin: '1.5%'\n        }\n      }, __jsx(Card.Body, null, __jsx(Card.Title, null, \"Retally\"), __jsx(Card.Subtitle, {\n        className: \"mb-2 text-muted\"\n      }, \"You can retally the vote for assuring the result\"), __jsx(Retally, {\n        stage: this.props.stage,\n        address: this.props.address,\n        mb_addr: this.props.mb_addr\n      })))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(props) {\n        var _props$query, address, mb_addr, Vote_event, stage, option_length, result, voter_list, winner, time, correct_time, i, a, options, stage_str, index, temp, arr;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _props$query = props.query, address = _props$query.address, mb_addr = _props$query.mb_addr;\n                _context.next = 3;\n                return vote(address);\n\n              case 3:\n                Vote_event = _context.sent;\n                _context.next = 6;\n                return Vote_event.methods.return_stage().call();\n\n              case 6:\n                stage = _context.sent;\n                _context.next = 9;\n                return Vote_event.methods.return_options_length().call();\n\n              case 9:\n                option_length = _context.sent;\n                _context.next = 12;\n                return Vote_event.methods.return_result().call();\n\n              case 12:\n                result = _context.sent;\n                _context.next = 15;\n                return Vote_event.methods.return_msgsender_voter_list().call();\n\n              case 15:\n                voter_list = _context.sent;\n                _context.next = 18;\n                return Vote_event.methods.return_winner().call();\n\n              case 18:\n                winner = _context.sent;\n                console.log(winner);\n                _context.next = 22;\n                return Vote_event.methods.return_time().call();\n\n              case 22:\n                time = _context.sent;\n                correct_time = [];\n                i = 0;\n\n              case 25:\n                if (!(i < 4)) {\n                  _context.next = 35;\n                  break;\n                }\n\n                console.log(time[i]);\n                _context.next = 29;\n                return new Date(time[i] * 1);\n\n              case 29:\n                a = _context.sent;\n                console.log(a.toString());\n                correct_time.push();\n\n              case 32:\n                i++;\n                _context.next = 25;\n                break;\n\n              case 35:\n                console.log(correct_time);\n                time = correct_time;\n                options = [];\n                stage_str = stage == 0 ? \"stage : Setup\" : stage == 1 ? \"stage : Register\" : stage == 2 ? \"stage : Vote\" : stage == 3 ? \"stage : Tally\" : stage == 4 ? \"stage : Finish\" : \"stage : Setup\";\n                index = 0;\n\n              case 40:\n                if (!(index < option_length)) {\n                  _context.next = 52;\n                  break;\n                }\n\n                _context.next = 43;\n                return Vote_event.methods.return_options(index).call();\n\n              case 43:\n                temp = _context.sent;\n                arr = [];\n                arr[0] = (index + 1).toString();\n                arr[1] = temp;\n                arr[2] = result[index];\n                options.push(arr);\n\n              case 49:\n                index++;\n                _context.next = 40;\n                break;\n\n              case 52:\n                return _context.abrupt(\"return\", {\n                  address: address,\n                  mb_addr: mb_addr,\n                  stage: stage,\n                  result: result,\n                  options: options,\n                  stage_str: stage_str,\n                  voter_list: voter_list,\n                  winner: winner,\n                  time: time\n                });\n\n              case 53:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Status;\n}(Component);\n\nvar Retally = /*#__PURE__*/function (_Component2) {\n  _inherits(Retally, _Component2);\n\n  var _super2 = _createSuper(Retally);\n\n  function Retally(props) {\n    var _this3;\n\n    _classCallCheck(this, Retally);\n\n    _this3 = _super2.call(this, props);\n    _this3.state = {};\n    _this3.go_tally = _this3.go_tally.bind(_assertThisInitialized(_this3));\n    return _this3;\n  }\n\n  _createClass(Retally, [{\n    key: \"go_tally\",\n    value: function () {\n      var _go_tally = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var accounts, Vote_event;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return web3.eth.getAccounts();\n\n              case 2:\n                accounts = _context2.sent;\n                _context2.next = 5;\n                return vote(this.props.address);\n\n              case 5:\n                Vote_event = _context2.sent;\n                _context2.prev = 6;\n                _context2.next = 9;\n                return Vote_event.methods.compute().send({\n                  from: accounts[0]\n                });\n\n              case 9:\n                Router.pushRoute(\"/Vote/status/\".concat(this.props.mb_addr, \"/\").concat(this.props.address));\n                _context2.next = 15;\n                break;\n\n              case 12:\n                _context2.prev = 12;\n                _context2.t0 = _context2[\"catch\"](6);\n                alert(_context2.t0.message);\n\n              case 15:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[6, 12]]);\n      }));\n\n      function go_tally() {\n        return _go_tally.apply(this, arguments);\n      }\n\n      return go_tally;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.props.stage <= 2) return __jsx(React.Fragment, null, __jsx(\"h3\", null, \"Have not reach the stage can Tally\"), __jsx(\"h3\", null, \"Please wait for a while\"));else return __jsx(React.Fragment, null, __jsx(Button, {\n        variant: \"primary\",\n        size: \"lg\",\n        style: {\n          margin: \"auto\"\n        },\n        onClick: this.go_tally\n      }, \"Retally button\"), ' ');\n    }\n  }]);\n\n  return Retally;\n}(Component);\n\n;\n\nvar Vote_result = /*#__PURE__*/function (_Component3) {\n  _inherits(Vote_result, _Component3);\n\n  var _super3 = _createSuper(Vote_result);\n\n  function Vote_result() {\n    _classCallCheck(this, Vote_result);\n\n    return _super3.apply(this, arguments);\n  }\n\n  _createClass(Vote_result, [{\n    key: \"render\",\n    //const vote_btn =function (stage ){\n    value: function render() {\n      //console.log(this.props.results);\n      if (this.props.stage < 3) return __jsx(React.Fragment, null, __jsx(\"h3\", null, \"Have not reach the stage can Tally\"), __jsx(\"h3\", null, \"Please wait for a while\"));else return __jsx(React.Fragment, null, __jsx(Card.Subtitle, {\n        className: \"mb-2 text-muted\"\n      }, \"Elected Candidate : \", this.props.stage == 4 ? this.props.winner : \"wait for tally\", \" \"), __jsx(Card.Subtitle, {\n        className: \"mb-2 text-muted\"\n      }, this.props.stage_str), __jsx(Table, {\n        responsive: true\n      }, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"#\"), __jsx(\"th\", null, \"Option's Name\"), __jsx(\"th\", null, \"Totol votes to the option\"))), __jsx(\"tbody\", null, this.props.results.map(function (result) {\n        return __jsx(\"tr\", null, __jsx(Vote_result_Unit, {\n          details: result\n        }));\n      }))));\n    }\n  }]);\n\n  return Vote_result;\n}(Component);\n\n;\n\nvar Vote_result_Unit = /*#__PURE__*/function (_Component4) {\n  _inherits(Vote_result_Unit, _Component4);\n\n  var _super4 = _createSuper(Vote_result_Unit);\n\n  function Vote_result_Unit() {\n    _classCallCheck(this, Vote_result_Unit);\n\n    return _super4.apply(this, arguments);\n  }\n\n  _createClass(Vote_result_Unit, [{\n    key: \"render\",\n    value: function render() {\n      return __jsx(React.Fragment, null, this.props.details.map(function (detail) {\n        return __jsx(\"td\", null, detail);\n      }));\n    }\n  }]);\n\n  return Vote_result_Unit;\n}(Component);\n\nvar Voter_listQQ = /*#__PURE__*/function (_Component5) {\n  _inherits(Voter_listQQ, _Component5);\n\n  var _super5 = _createSuper(Voter_listQQ);\n\n  function Voter_listQQ() {\n    _classCallCheck(this, Voter_listQQ);\n\n    return _super5.apply(this, arguments);\n  }\n\n  _createClass(Voter_listQQ, [{\n    key: \"render\",\n    value: function render() {\n      //console.log(this.props.list);\n      return __jsx(React.Fragment, null, this.props.list.map(function (item, index) {\n        return __jsx(\"tr\", null, __jsx(\"td\", null, index + 1), __jsx(\"td\", null, item), __jsx(\"td\", null, \"Yes\"));\n      }));\n    }\n  }]);\n\n  return Voter_listQQ;\n}(Component);\n\nexport default Status;\n/**暫時性垃圾\r\n * <Table responsive style={{'height': '200px',\"width\":\"50%\", 'overflowY':'scroll', 'display': 'block'}}>\r\n                    <thead>\r\n                        <tr>\r\n                        <th>#</th>\r\n                        <th>items</th>\r\n                        <th>link</th>\r\n                        </tr>\r\n                    </thead>\r\n                    \r\n                    <tbody>\r\n                        <tr>\r\n                        <td>1</td>\r\n                        <td>register or not</td>\r\n                        <td>True</td>\r\n                        </tr>\r\n                        <tr>\r\n                        <td>2</td>\r\n                        <td>Status</td>\r\n                        <td>Vote</td>\r\n                        </tr>\r\n                        <tr>\r\n                        <td>3</td>\r\n                        <td>Candidate 1</td>\r\n                        <td><Card.Link href=\"#\">policy</Card.Link></td>\r\n                        </tr>\r\n                        <tr>\r\n                        <td>3</td>\r\n                        <td>Table cell</td>\r\n                        <td>Table cell</td>\r\n                        </tr>\r\n                        <tr>\r\n                        <td>3</td>\r\n                        <td>Table cell</td>\r\n                        <td>Table cell</td>\r\n                        </tr>\r\n                        <tr>\r\n                        <td>3</td>\r\n                        <td>Table cell</td>\r\n                        <td>Table cell</td>\r\n                        </tr>\r\n                        <tr>\r\n                        <td>3</td>\r\n                        <td>Table cell</td>\r\n                        <td>Table cell</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </Table>\r\n */","map":{"version":3,"sources":["C:/Users/suvin/vincent/Dapp/nextjs-web/pages/Vote/status.js"],"names":["React","Component","Link","Navbar","Nav","Container","Form","FormControl","Button","Card","Table","ReactShadowScroll","web3","Router","vote","Status","props","state","search","register","register_answer","loading","loading2","errorMessage","refresh_search","bind","search_register","pushRoute","setState","index","voter_list","length","width","mb_addr","color","address","margin","event","target","value","height","marginTop","stage_str","time","undefined","options","stage","winner","query","Vote_event","methods","return_stage","call","return_options_length","option_length","return_result","result","return_msgsender_voter_list","return_winner","console","log","return_time","correct_time","i","Date","a","toString","push","return_options","temp","arr","Retally","go_tally","eth","getAccounts","accounts","compute","send","from","alert","message","Vote_result","results","map","Vote_result_Unit","details","detail","Voter_listQQ","list","item"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport{Link}from '../../routes';\r\n\r\nimport Navbar from 'react-bootstrap/Navbar';\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport Container from 'react-bootstrap/Nav';\r\nimport Form from 'react-bootstrap/Form';\r\nimport FormControl from 'react-bootstrap/FormControl';\r\nimport Button from 'react-bootstrap/Button';\r\nimport {Card,Table} from 'react-bootstrap';\r\nimport ReactShadowScroll from 'react-shadow-scroll';\r\nimport web3 from '../../ethereum/web3'\r\nimport {Router}from '../../routes';\r\nimport vote from '../../ethereum/Vote/vote';\r\n\r\nclass Status extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state ={\r\n          search : \"\",\r\n          register : \"\",\r\n          register_answer : \"\",\r\n          loading : false,\r\n          loading2: false,\r\n          errorMessage:''\r\n        };\r\n        this.refresh_search = this.refresh_search.bind(this);\r\n        this.search_register = this.search_register.bind(this);\r\n    }\r\n    static async getInitialProps(props){\r\n        const{address,mb_addr} = props.query;\r\n        const Vote_event =await vote(address);\r\n        const stage = await Vote_event.methods.return_stage().call();\r\n        const option_length = await Vote_event.methods.return_options_length().call();\r\n        const result = await Vote_event.methods.return_result().call();\r\n        //console.log(Vote_event);\r\n        let voter_list = await Vote_event.methods.return_msgsender_voter_list().call();\r\n        let winner = await Vote_event.methods.return_winner().call();\r\n        console.log(winner);\r\n        let time = await Vote_event.methods.return_time().call();\r\n        let correct_time =[];\r\n        for(let i = 0;i<4;i++) {\r\n            console.log(time[i]);\r\n            let a =await new Date(time[i]*1);\r\n            console.log(a.toString());\r\n            correct_time.push();\r\n        }\r\n        console.log(correct_time);\r\n        time = correct_time;\r\n        var options = [];\r\n\r\n        const stage_str =  (stage == 0)?\"stage : Setup\":\r\n                           (stage == 1)?\"stage : Register\":\r\n                           (stage == 2)?\"stage : Vote\":\r\n                           (stage == 3)?\"stage : Tally\":\r\n                           (stage == 4)?\"stage : Finish\":\"stage : Setup\";\r\n\r\n        for (let index = 0; index < option_length; index++) {\r\n            let temp = await Vote_event.methods.return_options(index).call();\r\n            let arr = [];\r\n            arr[0] = (index+1).toString();\r\n            arr[1] = temp;\r\n            arr[2] = result[index];\r\n            options.push(arr);\r\n        }\r\n\r\n        return{address,mb_addr,stage,result,options,stage_str,voter_list,winner,time};\r\n    }\r\n    refresh_search(){\r\n        if(this.state.search != \"\")\r\n         Router.pushRoute(`/Vote/status/${this.state.search}`);\r\n         //console.log(this.props.address);\r\n     }\r\n    search_register(){\r\n        if(this.state.register == \"\"){\r\n            this.setState({register_answer:\"\"});\r\n            return;\r\n        }\r\n        for (let index = 0; index < this.props.voter_list.length;index++){\r\n            if(this.state.register == this.props.voter_list[index]){\r\n                this.setState({register_answer:\"Already Registered !\"});\r\n                this.setState({register:\"\"});\r\n                return;\r\n            }\r\n        }\r\n        //console.log(this.state.register_answer);\r\n        this.setState({register_answer : \"Voter not found !\"});\r\n        this.setState({register:\"\"});\r\n        //this.setState({register_answer:\"\"});\r\n    }\r\n    render() {\r\n        return(\r\n        <>\r\n         <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css\" integrity=\"sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk\" crossorigin=\"anonymous\"/>\r\n         <Container>\r\n         <Navbar bg=\"dark\" variant=\"dark\"style={{width:\"100%\"}}>\r\n         <Navbar.Brand >Vote</Navbar.Brand>\r\n         <Nav className=\"mr-auto\">\r\n                <Link route={\"/Vote/home/\"+ this.props.mb_addr }  ><a style={{color: \"white\", width:\"100px\"}}>Home</a></Link>\r\n                <Link route={\"/Vote/status/\"+this.props.mb_addr+\"/\"+this.props.address} ><a style={{color: \"white\", width:\"100px\"}}>Vote</a></Link>\r\n                <Link route={\"/Vote/index\" }  ><a style={{color: \"white\", width:\"100px\"}}>Logout</a></Link>\r\n             </Nav>\r\n            <Form inline style={{margin :\"auto\"}}>\r\n            <div style={{color : \"white\"}} > insert your vote contract address here  -&gt;   </div>\r\n            <FormControl type=\"text\" placeholder=\"Search\" className=\"mr-sm-2\" \r\n             value={this.state.search} \r\n             onChange = {event => this.setState({search:event.target.value})}/>\r\n            <Button variant=\"outline-info\" onClick={this.refresh_search}>Search</Button>\r\n            </Form>\r\n        </Navbar>\r\n            \r\n        <Card style={{ width: '46%' , margin: '1.5%' ,height: '30%' }}>\r\n            <Card.Body>\r\n                <Card.Title>Eligible Voters</Card.Title>\r\n                <Card.Subtitle className=\"mb-2 text-muted\">voter quantity : {this.props.voter_list.length}</Card.Subtitle>\r\n                <Form inline style={{margin :\"auto\"}}>\r\n                        <FormControl type=\"text\" placeholder=\"Search\" className=\"mr-sm-2\" \r\n                            value={this.state.register} \r\n                            onChange = {event => this.setState({register:event.target.value})}/>\r\n                        <Button variant=\"outline-info\" onClick={this.search_register}>Search</Button>\r\n                        <Card.Subtitle className=\"mb-2 text-muted\" style={{marginTop :\"1%\",margin :\"2%\"}}>{this.state.register_answer}</Card.Subtitle>\r\n                </Form>\r\n                <Table responsive style={{'height': '200px',\"width\":\"100%\", 'overflowY':'scroll', 'display': 'block'}}>\r\n                    <thead>\r\n                        <tr>\r\n                        <th>#</th>\r\n                        <th>Voting Address</th>\r\n                        <th>Register or not</th>\r\n                        </tr>\r\n                    </thead>\r\n                    \r\n                    <tbody>\r\n                        <Voter_listQQ list ={this.props.voter_list}></Voter_listQQ>\r\n                    </tbody>\r\n                </Table>\r\n                \r\n            </Card.Body>\r\n        </Card>\r\n        <Card style={{ width: '46%' , margin: '1.5%'}}>\r\n            <Card.Body>\r\n                <Card.Title>Voting Illustration</Card.Title>\r\n                <Card.Subtitle className=\"mb-2 text-muted\">Vote address : {this.props.address}</Card.Subtitle>\r\n                <Card.Subtitle className=\"mb-2 text-muted\">{this.props.stage_str}</Card.Subtitle>\r\n                <Card.Text>\r\n                    View the latest 2020 presidential polls and head-to-head match-up between Joe Biden and Donald Trump. For more information, view cnn.com/election.\r\n                </Card.Text>\r\n                <Table responsive style={{'height': '200px',\"width\":\"100%\", 'overflowY':'scroll', 'display': 'block'}}>\r\n                    <thead>\r\n                        <tr>\r\n                        <th>#</th>\r\n                        <th>Start time</th>\r\n                        <th>End time</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <th>Register time</th>\r\n                            <th>{(this.props.time !== undefined)?this.props.time[0]:\"\"}</th>\r\n                            <th>{(this.props.time !== undefined)?this.props.time[1]:\"\"}</th>\r\n                        </tr>\r\n                        <tr>\r\n                            <th>Vote time</th>\r\n                            <th>{(this.props.time !== undefined)?this.props.time[2]:\"\"}</th>\r\n                            <th>{(this.props.time !== undefined)?this.props.time[3]:\"\"}</th>\r\n                        </tr>\r\n                    </tbody>\r\n                </Table>\r\n                \r\n            </Card.Body>\r\n        </Card>\r\n        <Card style={{ width: '46%' , margin: '1.5%'}}>\r\n            <Card.Body>\r\n                <Card.Title>Voting result</Card.Title>\r\n                <Card.Subtitle className=\"mb-2 text-muted\">The Vote result is shown below</Card.Subtitle>\r\n                        <Vote_result results = {this.props.options} stage ={this.props.stage} winner={this.props.winner}\r\n                                     stage_str={this.props.stage_str} address = {this.props.address} mb_addr={this.props.mb_addr}>\r\n                        </Vote_result>\r\n                        \r\n            </Card.Body>\r\n        </Card>\r\n        <Card style={{ width: '46%' , margin: '1.5%'}}>\r\n            <Card.Body>\r\n                <Card.Title>Retally</Card.Title>\r\n                <Card.Subtitle className=\"mb-2 text-muted\">You can retally the vote for assuring the result</Card.Subtitle>\r\n                <Retally stage = {this.props.stage} address = {this.props.address} mb_addr={this.props.mb_addr}></Retally>\r\n                {/*<Button variant=\"primary\" size=\"lg\" style={{ margin:\"auto\"}}>\r\n                     Retally button\r\n                </Button>*/}\r\n            </Card.Body>\r\n        </Card>\r\n      </Container>\r\n        </>\r\n    )\r\n    }\r\n}\r\n\r\nclass Retally extends Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state ={\r\n            \r\n        };\r\n        this.go_tally = this.go_tally.bind(this);\r\n      }\r\n      async go_tally(){\r\n            //0x42309f924237Bac662Af64965A2efAF8c08fE4d2\r\n            const accounts = await web3.eth.getAccounts();\r\n            const Vote_event =await vote(this.props.address);\r\n            //console.log(web3.utils.fromAscii(hash));\r\n            try{\r\n                await Vote_event.methods.compute().send({from:accounts[0]});\r\n                Router.pushRoute(`/Vote/status/${this.props.mb_addr}/${this.props.address}`);\r\n            } catch (err) {\r\n                alert(err.message);\r\n            }\r\n        }\r\n        render(){\r\n        if(this.props.stage <=2 ) \r\n            return (\r\n                <>\r\n                <h3>Have not reach the stage can Tally</h3>\r\n                <h3>Please wait for a while</h3>\r\n                </>\r\n            );\r\n        else \r\n            return (\r\n                <>\r\n                <Button variant=\"primary\" size=\"lg\" style={{ margin:\"auto\"}} onClick={this.go_tally}>\r\n                     Retally button\r\n                </Button>{' '}\r\n                </>\r\n            );\r\n        }\r\n  };\r\n\r\nclass Vote_result extends Component{\r\n    //const vote_btn =function (stage ){\r\n        render(){\r\n        //console.log(this.props.results);\r\n        if(this.props.stage <3 ) \r\n            return (\r\n                <>\r\n                <h3>Have not reach the stage can Tally</h3>\r\n                <h3>Please wait for a while</h3>\r\n                </>\r\n            );\r\n        else \r\n            return (\r\n                <>\r\n                <Card.Subtitle className=\"mb-2 text-muted\">Elected Candidate : {(this.props.stage==4)?this.props.winner:\"wait for tally\"} </Card.Subtitle>\r\n                <Card.Subtitle className=\"mb-2 text-muted\">{this.props.stage_str}</Card.Subtitle>\r\n                <Table responsive>\r\n                    <thead>\r\n                        <tr>\r\n                        <th>#</th>\r\n                        <th>Option's Name</th>\r\n                        <th>Totol votes to the option</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {this.props.results.map(result => <tr><Vote_result_Unit details={result}></Vote_result_Unit></tr>)}\r\n                    </tbody>\r\n                </Table>\r\n                </>\r\n            );\r\n        }\r\n  };\r\nclass Vote_result_Unit extends Component{\r\n    render(){\r\n        return(\r\n            <>\r\n            {this.props.details.map(detail => <td>{detail}</td>)}\r\n            </>\r\n        )\r\n    }\r\n}\r\nclass Voter_listQQ extends Component{\r\n    render(){\r\n        //console.log(this.props.list);\r\n        return(\r\n            <>\r\n            {this.props.list.map((item,index)=>\r\n                <tr>\r\n                <td>{index+1}</td>\r\n                <td>{item}</td>\r\n                <td>Yes</td>\r\n                </tr>\r\n            )}\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Status;\r\n\r\n\r\n/**暫時性垃圾\r\n * <Table responsive style={{'height': '200px',\"width\":\"50%\", 'overflowY':'scroll', 'display': 'block'}}>\r\n                    <thead>\r\n                        <tr>\r\n                        <th>#</th>\r\n                        <th>items</th>\r\n                        <th>link</th>\r\n                        </tr>\r\n                    </thead>\r\n                    \r\n                    <tbody>\r\n                        <tr>\r\n                        <td>1</td>\r\n                        <td>register or not</td>\r\n                        <td>True</td>\r\n                        </tr>\r\n                        <tr>\r\n                        <td>2</td>\r\n                        <td>Status</td>\r\n                        <td>Vote</td>\r\n                        </tr>\r\n                        <tr>\r\n                        <td>3</td>\r\n                        <td>Candidate 1</td>\r\n                        <td><Card.Link href=\"#\">policy</Card.Link></td>\r\n                        </tr>\r\n                        <tr>\r\n                        <td>3</td>\r\n                        <td>Table cell</td>\r\n                        <td>Table cell</td>\r\n                        </tr>\r\n                        <tr>\r\n                        <td>3</td>\r\n                        <td>Table cell</td>\r\n                        <td>Table cell</td>\r\n                        </tr>\r\n                        <tr>\r\n                        <td>3</td>\r\n                        <td>Table cell</td>\r\n                        <td>Table cell</td>\r\n                        </tr>\r\n                        <tr>\r\n                        <td>3</td>\r\n                        <td>Table cell</td>\r\n                        <td>Table cell</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </Table>\r\n */"]},"metadata":{},"sourceType":"module"}